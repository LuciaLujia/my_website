<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <title>Advanced - Graph Reproduction and Analysis of GDP Components</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- Slick Carousel --> 
  <link rel="stylesheet" href="/plugins/slick/slick.css" />
  <link rel="stylesheet" href="/plugins/slick/slick-theme.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/plugins/font-awesome/css/font-awesome.min.css" />
  <!-- Bootstrap -->
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css" />
  <link rel="stylesheet" href="/plugins/magnafic-popup/magnific-popup.css" />

  <!-- Stylesheets -->
  
  <link href="/scss/style.min.css" rel="stylesheet" />

  <!--Favicon-->
  <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR%20GOOGLE%20ANALYTICS%20CODE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'YOUR GOOGLE ANALYTICS CODE');
  </script>
	
</head>

  <body>
    <nav class="navbar navbar-expand-lg fixed-top">
  <div class="container">
      <a href="/" class="navbar-brand">
          <img src="/images/site-navigation/logo-black.png" alt="site-logo">
      </a>
      <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbarCollapse">
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggler-icon"></span>
      </button>
  
      <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
          <ul class="nav navbar-nav main-navigation">
              
              
                <li class="nav-item">
                  <a href="/#home" class="nav-link ">Home</a>
                </li>
              
                <li class="nav-item">
                  <a href="/#resume" class="nav-link ">Resume</a>
                </li>
              
                <li class="nav-item">
                  <a href="/#blog" class="nav-link ">Blog</a>
                </li>
              
                <li class="nav-item">
                  <a href="/#contact" class="nav-link ">Contact</a>
                </li>
              
          </ul>
          <div class="navbar-nav">
              <a href="/contact" class="hire_button">Hire Me Now</a>
          </div>
      </div>
  </div>
</nav>
    <div id="content">
      

<header class="breadCrumb">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-md-12 offset-lg-1 offset-md-0 text-center">
        <h3 class="breadCrumb__title">Advanced - Graph Reproduction and Analysis of GDP Components</h3>
        <nav aria-label="breadcrumb" class="d-flex justify-content-center">
          <ol class="breadcrumb align-items-center">
            <li class="breadcrumb-item"><a href=/>Home</a></li>
            <li class="breadcrumb-item"><a href=/blog>All Post</a></li>
            <li class="breadcrumb-item active" aria-current="page">Advanced - Graph Reproduction and Analysis of GDP Components</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="section singleBlog">
  <div class="svg-img">
      <img src=/images/hero/figure-svg.svg alt="">
  </div>
  <div class="animate-shape">
      
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 600 600">
          <defs>
              <linearGradient id="d" x1="0.929" y1="0.111" x2="0.263" y2="0.935" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#f1f6f9" />
                  <stop offset="1" stop-color="#f1f6f9" stop-opacity="0" />
              </linearGradient>
          </defs>
          <g data-name="blob-shape (3)">
              <path class="blob" fill="url(#d)"
                  d="M455.4 151.1c43.1 36.7 73.4 92.8 60.8 136.3-12.7 43.5-68.1 74.4-111.3 119.4-43.1 45-74 104.1-109.8 109-35.9 5-76.7-44.2-111.8-89.2-35.2-45-64.7-85.8-70.8-132.6-6-46.8 11.6-99.6 46.7-136.3 35.2-36.6 88-57.2 142.4-58.8 54.5-1.7 110.6 15.6 153.8 52.2z" />
          </g>
      </svg>
  </div>
  <div class="animate-pattern">
      <img src=/images/service/background-pattern.svg alt="background-shape">
  </div>
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="singleBlog__feature">
                  <img src=/images/single-blog/0.jpg alt="feature-image">
              </div>
          </div>
      </div>
      <div class="row mt-5">
          <div class="col-lg-12">
              <div class="singleBlog__content">
                  
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<p><em><strong>Team members:</strong> <a href="https://www.linkedin.com/in/nooralameri/">Noor Alameri</a>, <a href="https://www.linkedin.com/in/brigita-angkasa/">Brigita Angkasa</a>, <a href="https://www.linkedin.com/in/lujia-huang/">Lujia Huang</a>, <a href="https://www.linkedin.com/in/martino-armanini-a6b90611a/">Martino Armanini</a>, <a href="https://www.linkedin.com/in/laubem/">Marco Laube</a>, <a href="https://www.linkedin.com/in/deniz-%C3%B6zdemir-784335b7/">Deniz Özdemir</a></em></p>
<p><em><strong>Source:</strong> Homework 3 for <a href="https://mam2021.netlify.app/">Applied Statistics with R</a> by Kostis @ London Business School</em></p>
<p><em><strong>Key Words:</strong> skim, glimpse, ggplot, summarise, mutate, pivot_longer</em></p>
<div id="gdp-components-over-time-and-among-countries" class="section level1">
<h1>GDP components over time and among countries</h1>
<p><br/>
At the risk of oversimplifying things, the main components of gross domestic product, GDP are personal consumption (C), business investment (I), government spending (G) and net exports (exports - imports). You can read more about GDP and the different approaches in calculating at the <a href="https://en.wikipedia.org/wiki/Gross_domestic_product">Wikipedia GDP page</a>.</p>
<p>The GDP data we will look at is from the <a href="https://unstats.un.org/unsd/snaama/Downloads">United Nations’ National Accounts Main Aggregates Database</a>, which contains estimates of total GDP and its components for all countries from 1970 to today. We will look at how GDP and its components have changed over time, and compare different countries and how much each component contributes to that country’s GDP. The file we will work with is <a href="http://unstats.un.org/unsd/amaapi/api/file/6">GDP and its breakdown at constant 2010 prices in US Dollars</a>.</p>
<pre class="r"><code>UN_GDP_data  &lt;- read_excel(here::here(&quot;project_data&quot;, &quot;Download-GDPconstant-USD-countries.xls&quot;), # Excel filename
                
                           # Sheet name
                           sheet=&quot;Download-GDPconstant-USD-countr&quot;, 
                           
                           # Number of rows to skip
                           skip=2) </code></pre>
<p><br/>
We first tidy up the data, as it is in wide format. Furthermore, we divide by <code>1e9</code> to express all figures in billions and rename the indicators into something shorter.</p>
<pre class="r"><code># for the values remapping / renaming
from = c(&quot;Household consumption expenditure (including Non-profit institutions serving households)&quot;,
         &quot;General government final consumption expenditure&quot;,
         &quot;Exports of goods and services&quot;,
         &quot;Imports of goods and services&quot;)

to = c(&quot;Household expenditure&quot;,
       &quot;Government expenditure&quot;,
       &quot;Exports&quot;,
       &quot;Imports&quot;)

tidy_GDP_data &lt;- UN_GDP_data %&gt;% 
  
  # bring into long format
  pivot_longer(cols = `1970`:`2017`, names_to = &quot;year&quot;, values_to = &quot;values&quot;) %&gt;% 
  
  # express in billions
  mutate(values = values / 1e9) %&gt;% 
  
  # rename indicators
  mutate(IndicatorName = plyr::mapvalues(IndicatorName, from, to))


# let&#39;s have a look at the data
glimpse(tidy_GDP_data)</code></pre>
<pre><code>## Rows: 176,880
## Columns: 5
## $ CountryID     &lt;dbl&gt; 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,...
## $ Country       &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghani...
## $ IndicatorName &lt;chr&gt; &quot;Final consumption expenditure&quot;, &quot;Final consumption e...
## $ year          &lt;chr&gt; &quot;1970&quot;, &quot;1971&quot;, &quot;1972&quot;, &quot;1973&quot;, &quot;1974&quot;, &quot;1975&quot;, &quot;1976...
## $ values        &lt;dbl&gt; 5.56, 5.33, 5.20, 5.75, 6.15, 6.32, 6.37, 6.90, 7.09,...</code></pre>
<pre class="r"><code># Let us compare GDP components for these 3 countries
country_list &lt;- c(&quot;United States&quot;,&quot;India&quot;, &quot;Germany&quot;)</code></pre>
<p><br/>
Plot Reproduction:</p>
<pre class="r"><code># create plot
tidy_GDP_data %&gt;% 
  
  # only visualise for countries in the country_list
  filter(Country %in% country_list) %&gt;% 
  
  # only visualise certain indicators
  filter(IndicatorName %in% c(&quot;Gross capital formation&quot;, 
                              &quot;Exports&quot;, 
                              &quot;Government expenditure&quot;, 
                              &quot;Household expenditure&quot;, 
                              &quot;Imports&quot;)) %&gt;% 
  
  # make indicator a factor with correct ordering
  mutate(IndicatorName = factor(IndicatorName, 
                                levels = c(&quot;Gross capital formation&quot;,
                                           &quot;Exports&quot;,
                                           &quot;Government expenditure&quot;,
                                           &quot;Household expenditure&quot;,
                                           &quot;Imports&quot;))) %&gt;% 
  
  # ggplot framework
  ggplot(aes(x = year, y = values, color = IndicatorName)) +
  
  # add lines
  geom_line(aes(group = IndicatorName), size = 0.8) + 
 
  # faceting by country
  facet_wrap(~Country) +
  
  # custom scale breaks
  scale_x_discrete(breaks = c(1970, 1980, 1990, 2000, 2010)) +
  
  # bw theme
  theme_bw() +
  
  # labels (also for the legend)
  labs(title = &quot;GDP components over time&quot;,
       subtitle = &quot;In constant 2010 USD&quot;,
       x = &quot;&quot;,
       y = &quot;Billion US$&quot;,
       color = &quot;Components of GDP&quot;)</code></pre>
<p><img src="/blog/3-GDP-components-over-time-and-among-countries_files/figure-html/challenge_2_1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br/>
Original Plot:
<img src="/blog/3-GDP-components-over-time-and-among-countries_files/figure-html/gdp1-1.png" width="648" style="display: block; margin: auto;" />
Secondly, recall that GDP is the sum of Household Expenditure (Consumption <em>C</em>), Gross Capital Formation (business investment <em>I</em>), Government Expenditure (G) and Net Exports (exports - imports). Even though there is an indicator <code>Gross Domestic Product (GDP)</code> in the dataframe, we calculate it given its components discussed above.</p>
<pre class="r"><code># wrangle data and calculate GDP
tidy_GDP_data_2 &lt;- tidy_GDP_data %&gt;% 
  
  # bring in wide format to easily calculate GDP
  pivot_wider(names_from = IndicatorName, values_from = values) %&gt;% 
  
  # calculate Net Exports, GDP and % difference in GDPs
  mutate(`Net Exports` = Exports-Imports,
         `Calculated GDP` = `Household expenditure` + `Gross capital formation` + `Government expenditure` + `Net Exports`,
         `Percentage Change` = (`Calculated GDP` - `Gross Domestic Product (GDP)`)/`Gross Domestic Product (GDP)`)

# summary statistics
mosaic::favstats(~`Percentage Change`, data=tidy_GDP_data_2) %&gt;% 
  
  # have a nice HTML table
  kbl(caption = &quot;overall summary statistics for the % difference between calculated and included GDP&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;)) </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
(#tab:GDP_calculation)overall summary statistics for the % difference between calculated and included GDP
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
Q1
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
Q3
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
missing
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
-0.549
</td>
<td style="text-align:right;">
-0.021
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.022
</td>
<td style="text-align:right;">
1.16
</td>
<td style="text-align:right;">
0.004
</td>
<td style="text-align:right;">
0.087
</td>
<td style="text-align:right;">
9574
</td>
<td style="text-align:right;">
986
</td>
</tr>
</tbody>
</table>
<p><br/>
As we can see, the % difference of the two GDPs is in most cases around 0, i.e. both GDPs are in most cases approximately the same.</p>
<p>Plot Reproduction:</p>
<pre class="r"><code># prepare data and plot
tidy_GDP_data_2 %&gt;% 
  
  # calculate the percentage values
  mutate(`Government Expenditure` = `Government expenditure` / `Gross Domestic Product (GDP)`,
         `Gross capital formation` = `Gross capital formation` / `Gross Domestic Product (GDP)`,
         `Household Expenditure` = `Household expenditure` / `Gross Domestic Product (GDP)`,
         `Net Exports` = `Net Exports` / `Gross Domestic Product (GDP)`) %&gt;% 
  
  # bring back into long format
  pivot_longer(cols = `Final consumption expenditure`:`Household Expenditure`, 
               names_to = &quot;IndicatorName&quot;, 
               values_to = &quot;values&quot;) %&gt;% 
  
  # only visualise for countries in the country_list
  filter(Country %in% country_list) %&gt;% 
  
  # only visualise certain indicators
  filter(IndicatorName %in% c(&quot;Gross capital formation&quot;, 
                              &quot;Government Expenditure&quot;, 
                              &quot;Household Expenditure&quot;, 
                              &quot;Net Exports&quot;)) %&gt;% 
  
  # ggplot framework
  ggplot(aes(x = year, y = values, color = IndicatorName)) +
  
  # add lines
  geom_line(aes(group = IndicatorName), size = 0.8) + 
  
  # faceting by country
  facet_wrap(~Country) +
  
  # custom scale breaks
  scale_x_discrete(breaks = c(1970, 1980, 1990, 2000, 2010)) +
  
  # percentage scale on y axis
  scale_y_continuous(labels = scales::percent) +
  
  # bw theme
  theme_bw() +
  
  # labels
  labs(title = &quot;GDP and its breakdown at constant 2010 prices in US Dollars&quot;,
       caption = &quot;Source: United Nations, https://unstats.un.org/unsd/snaama/Downloads&quot;,
       x = &quot;&quot;,
       y = &quot;proportion&quot;) +
  
  # no legend title
  theme(legend.title = element_blank())</code></pre>
<p><img src="/blog/3-GDP-components-over-time-and-among-countries_files/figure-html/challenge_2_2-1.png" width="672" style="display: block; margin: auto;" />
<br/>
Original Plot:
<img src="/blog/3-GDP-components-over-time-and-among-countries_files/figure-html/gdp2-1.png" width="648" style="display: block; margin: auto;" />
First, let’s have a look at the net export proportion. In India and the United States, there is a trend towards higher imports as opposed to lower exports. For Germany, we can see the opposite effect, meaning that its net exports are growing at a higher rate than its overall GDP.</p>
<p>Regarding the proportion of gross capital formation, i.e. investments, we can see that there is a sharp rise in India in the 2000s. In the US, the proportion of GCF is also slightly rising, whereas the proportion in Germany dropped.</p>
<p>The proportion of Government expenditure is quite steady in India and Germany, whereas it dropped in the US.</p>
<p>Finally, household expenditure dropped significantly in India (with the investments going up), wheres they are steady in Germany and rising in the US.</p>
<p>All in all, we can conclude the following:</p>
<ul>
<li>Proportions in Germany are quite steady, with its net exports rate rising</li>
<li>In India, businesses are more and more investing, while the household expenditure rate drops</li>
<li>While government expenditure rates drop, households and businesses (have to) invest more in the US. This can be well explained by the rise of neo-liberalism and a lower influence of the public sector</li>
</ul>
</div>

              </div>
          </div>
      </div>
  </div>
</section>


    </div>
    <section class="contact" id="contact">
  <div class="contact__background_shape">
      <svg viewBox="0 0 1920 79">
          <path d="M0 0h1920v79L0 0z" data-name="Path 1450" />
      </svg>
  </div>
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="contact__cta">
                  <div class="shape-1">
                      <svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029">
                          <path data-name="Path 1449" d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z" transform="translate(217.489 188.626)"/>
                      </svg>
                  </div>
                  <div class="shape-2">
                      <svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029">
                          <path data-name="Path 1449" d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z" transform="translate(217.489 188.626)"/>
                      </svg>
                  </div>
                  <div class="contact__cta_content">
                      <span>Contact me</span>
                      <h1>Let’s Start a Project</h1>
                  </div>
                  <div class="contact__cta_action">
                      <a href="/contact">Get in touch</a>
                  </div>
              </div>
          </div>
      </div>
      <div class="row contact__widget">
          <div class="col-lg-4">
              <div class="contact__widget_logo">
                  <img src="/images/site-navigation/logo-white.png" alt="widget-logo">
              </div>
          </div>
          <div class="col-lg-4">
              <div class="contact__widget_sitemap">
                  <h3>Sitemap</h3>
                  <ul>
                      
                      
                        <li><a href="/">About me</a></li>
                      
                        <li><a href="/blog">Latest Article</a></li>
                      
                  </ul>
              </div>
          </div>
          <div class="col-lg-4">
              <div class="contact__widget_address">
                  <h3>Address</h3>
                  
                  <ul>
                      <li><a href="tel:&#43;44%20%280%2920%207000%207000"><i class="fa fa-phone"></i>&#43;44 (0)20 7000 7000</a></li> 
                      <li><a href="mailto:lhuang.mam2021@london.edu"><i class="fa fa-envelope"></i>lhuang.mam2021@london.edu</a></li>
                      <li><p><i class="fa fa-map-marker"></i>London Business School, Regent&#39;s Park, London, United Kingdom</p></li>
                  </ul>
              </div>
          </div>
      </div>
      <div class="row contact__footer">
          <div class="col-lg-6">
              <div class="contact__footer_copy">
                  <p></p>
              </div>
          </div>
          <div class="col-lg-6">
              <div class="contact__footer_social">
                  <ul>
                      <li><a href="https://github.com/LuciaLujia"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                      <li><a href="https://www.linkedin.com/in/lujia-huang/"><i class="fa fa-linkedin-square"></i></a></li>
                      <li><a href="https://www.instagram.com/luciaaa2723/"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                      <li><a href="https://www.facebook.com/lujia.huang.7/"><i class="fa fa-facebook-square" aria-hidden="true"></i></a></li>
                      <li><a href="https://twitter.com/huang_lujia"><i class="fa fa-twitter"></i></a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>
</section>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2JuE_JhKjvzQsSxuV8p7XD-fq2uzLgGk&libraries=geometry"></script>
<script src="/plugins/jQuery/jquery.min.js"></script>
<script src="/plugins/bootstrap/bootstrap.min.js"></script>
<script src="/plugins/slick/slick.min.js"></script>
<script src="/plugins/slick/slick.min.js"></script>
<script src="/plugins/waypoint/jquery.waypoints.min.js"></script>
<script src="/plugins/magnafic-popup/jquery.magnific-popup.min.js"></script>
<script src="/plugins/tweenmax/TweenMax.min.js"></script>
<script src="/plugins/masonry/masonry.min.js"></script>

<script src="/js/form-handler.min.js"></script>

<script src="/js/script.min.js"></script>
  </body>
</html>
